services:
  model-sync:
    build:
      context: .
      args:
        UID: 1000
        GID: 1000
    container_name: model-sync
    ports:
      - "9090:9090"
    user: "1000:1000"
    environment:
      - HOME=/home/app
    volumes:
      # Persist config in /home/app/.model_sync_config.json on the host
      - ./data:/home/app

      # Your models on the host -> /models in the container
      - /opt/ai/models:/models

      # SSH keys/config for rsync/ssh
      # NOTE: needs to be writable if ssh will write known_hosts.
      - ${HOME}/.ssh:/home/app/.ssh
